# 02. 원천 데이터 분석 및 이해

## 📊 8개 원천 데이터 상세 분석

---

## 1️⃣ 회원정보 (Customer Information)

### 파일명
- `train_회원정보.parquet`
- `test_회원정보.parquet`

### 주요 변수 (~20개)

| 변수명 | 설명 | 타입 | 예시 | 중요도 |
|--------|------|------|------|--------|
| ID | 고유 고객 식별자 | 문자열 | TRAIN_000001 | - |
| 나이 | 고객 연령 | 정수 | 35 | ⭐⭐⭐ |
| 성별 | 남/여 | 범주 | M, F | ⭐⭐ |
| 거주지역 | 시/도 | 범주 | 서울, 경기 | ⭐⭐ |
| 입회일자 | 카드 최초 발급일 | 날짜 | 20200315 | ⭐⭐⭐⭐ |
| 소지카드수_신용 | 보유 신용카드 수 | 정수 | 3 | ⭐⭐⭐ |
| 소지카드수_체크 | 보유 체크카드 수 | 정수 | 1 | ⭐⭐ |

### 데이터 특성
- **완결성**: 결측치 거의 없음 (< 1%)
- **분포**: 나이는 20~80세, 중앙값 42세
- **특이사항**: 입회일자에서 고객 생애주기 계산 가능

---

## 2️⃣ 신용정보 (Credit Information)

### 파일명
- `train_신용정보.parquet`
- `test_신용정보.parquet`

### 주요 변수 (~30개)

| 변수명 | 설명 | 타입 | 예시 | 중요도 |
|--------|------|------|------|--------|
| 신용등급 | 1~10등급 (1이 최상) | 정수 | 3 | ⭐⭐⭐⭐⭐ |
| 연체일수_최근 | 최근 연체 일수 | 정수 | 0, 5, 30 | ⭐⭐⭐⭐⭐ |
| 카드이용한도금액 | 신용한도 | 정수 | 5000000 | ⭐⭐⭐⭐ |
| 한도증액후경과월 | 마지막 한도증액 이후 개월 수 | 정수 | 12 | ⭐⭐⭐ |
| 신용조회횟수_6M | 최근 6개월 신용조회 | 정수 | 2 | ⭐⭐ |

### 데이터 특성
- **완결성**: 연체일수 결측치 약 3% (미연체 고객)
- **분포**: 신용등급 3~7등급이 80% 차지
- **특이사항**: 한도와 실제 사용액의 괴리가 세그먼트 분류에 중요

### 도메인 인사이트
```
💡 신용등급만으론 세그먼트 예측 불가
   → Segment 0 (최상위): 신용등급 1~2등급이지만, 카드 사용 거의 없음
   → Segment 4 (일반): 신용등급 3~5등급이지만, 활발한 사용
```

---

## 3️⃣ 승인매출정보 (Transaction Information)

### 파일명
- `train_승인매출정보.parquet`
- `test_승인매출정보.parquet`

### 주요 변수 (~50개)

#### 기간별 사용액 (R3M, R6M, R12M)
| 변수명 | 설명 | 타입 | 중요도 |
|--------|------|------|--------|
| 이용금액_일시불_R3M | 최근 3개월 일시불 사용액 | 정수 | ⭐⭐⭐⭐⭐ |
| 이용금액_할부_R6M | 최근 6개월 할부 사용액 | 정수 | ⭐⭐⭐⭐ |
| 이용금액_CA_R12M | 최근 12개월 현금서비스 | 정수 | ⭐⭐⭐ |

#### 업종별 사용액
| 변수명 | 설명 | 중요도 |
|--------|------|--------|
| 쇼핑_백화점이용금액 | 백화점 사용액 | ⭐⭐⭐⭐ |
| 교통_주유이용금액 | 주유소 사용액 | ⭐⭐⭐ |
| 생활_마트이용금액 | 마트 사용액 | ⭐⭐⭐ |
| 레저_해외이용금액 | 해외 사용액 | ⭐⭐⭐⭐⭐ |

#### 사용 패턴
| 변수명 | 설명 | 중요도 |
|--------|------|--------|
| 이용건수_신용_R12M | 12개월 신용카드 사용 건수 | ⭐⭐⭐⭐ |
| 최대이용금액_일시불_R12M | 12개월 최대 일시불 금액 | ⭐⭐⭐⭐⭐ |
| 최종이용일자_일시불 | 일시불 최종 사용일 | ⭐⭐⭐⭐ |

### 데이터 특성
- **완결성**: 사용 없는 고객은 0으로 채워짐
- **분포**: 극단적 편향 (80%는 소액 사용, 5%는 고액 사용)
- **특이사항**: R3M, R6M, R12M 비교로 트렌드 파악 가능

### 도메인 인사이트
```
💡 Segment 0 특징:
   - 해외 사용액 高, 백화점 사용액 高
   - 하지만 사용 빈도는 低 (분기 1~2회)
   - "고액 저빈도 사용자"

💡 Segment 4 특징:
   - 마트, 주유소 등 일상 소비 中心
   - 사용 빈도 高, 1건당 금액 低
   - "소액 고빈도 사용자"
```

---

## 4️⃣ 청구입금정보 (Billing Information)

### 파일명
- `train_청구정보.parquet`
- `test_청구정보.parquet`

### 주요 변수 (~25개)

#### 월별 청구 (B0M ~ B11M)
| 변수명 | 설명 | 타입 | 중요도 |
|--------|------|------|--------|
| 정상청구원금_B0M | 당월 청구원금 | 정수 | ⭐⭐⭐⭐⭐ |
| 정상청구원금_B1M | 1개월 전 청구원금 | 정수 | ⭐⭐⭐⭐ |
| 정상청구원금_B5M | 5개월 전 청구원금 | 정수 | ⭐⭐⭐⭐ |

#### 입금 패턴
| 변수명 | 설명 | 중요도 |
|--------|------|--------|
| 입금액_R3M | 최근 3개월 입금액 | ⭐⭐⭐⭐ |
| 연체입금액_R6M | 최근 6개월 연체 후 입금액 | ⭐⭐⭐⭐⭐ |

#### 기간별 청구
| 변수명 | 설명 | 중요도 |
|--------|------|--------|
| 청구금액_R3M | 최근 3개월 총 청구 | ⭐⭐⭐⭐⭐ |
| 청구금액_R6M | 최근 6개월 총 청구 | ⭐⭐⭐⭐ |

### 데이터 특성
- **완결성**: 미사용 고객은 0
- **시계열성**: B0M~B11M으로 12개월 추세 분석 가능

### 도메인 인사이트
```
💡 청구금액 변동성이 세그먼트 결정 요인:
   - Segment 0: B0M ~ B5M 청구액 변동 폭 큼 (계절적 고액 사용)
   - Segment 4: B0M ~ B5M 청구액 거의 일정 (정기적 소액 사용)

💡 v3.5에서 파생변수로 활용:
   - v3_bill_change_R3M_R6M = (청구금액_R3M - 청구금액_R6M) / 청구금액_R6M
   - v3_bill_mean_B5_B2_B0 = mean(정상청구원금_B5M, B2M, B0M)
```

---

## 5️⃣ 잔액정보 (Balance Information)

### 파일명
- `train_잔액정보.parquet`
- `test_잔액정보.parquet`

### 주요 변수 (~20개)

#### 월별 잔액 (B0M ~ B11M)
| 변수명 | 설명 | 중요도 |
|--------|------|--------|
| 잔액_일시불_B0M | 당월 일시불 잔액 | ⭐⭐⭐⭐ |
| 잔액_할부_B0M | 당월 할부 잔액 | ⭐⭐⭐ |
| 잔액_CA_B0M | 당월 현금서비스 잔액 | ⭐⭐⭐⭐⭐ |
| 잔액_카드론_B0M | 당월 카드론 잔액 | ⭐⭐⭐⭐⭐ |

#### 평균 잔액
| 변수명 | 설명 | 중요도 |
|--------|------|--------|
| 평잔_일시불_6M | 6개월 평균 일시불 잔액 | ⭐⭐⭐⭐⭐ |
| 평잔_6M | 6개월 평균 총 잔액 | ⭐⭐⭐⭐⭐ |
| 월중평잔_일시불 | 월중 평균 일시불 잔액 | ⭐⭐⭐⭐ |

#### 한도 소진율
| 변수명 | 설명 | 중요도 |
|--------|------|--------|
| 잔액_신판ca최대한도소진율_r6m | 6개월 최대한도 대비 소진율 | ⭐⭐⭐⭐⭐ |

### 도메인 인사이트
```
💡 CA(현금서비스), 카드론 잔액은 리스크 지표:
   - Segment 0: CA, 카드론 사용 거의 없음 (0원)
   - Segment 2~4: CA 사용 있으나, 카드론은 낮음

💡 v4에서 파생변수:
   - v4_balance_to_usage_ratio = 평잔_6M / (이용금액_R6M + EPS)
   - 높을수록 → 잔액 쌓이는 타입 (회전 낮음)
```

---

## 6️⃣ 채널정보 (Channel Information)

### 파일명
- `train_채널정보.parquet`
- `test_채널정보.parquet`

### 주요 변수 (~15개)

| 변수명 | 설명 | 중요도 |
|--------|------|--------|
| 이용금액_온라인_R3M | 최근 3개월 온라인 사용액 | ⭐⭐⭐⭐ |
| 이용금액_온라인_R6M | 최근 6개월 온라인 사용액 | ⭐⭐⭐⭐ |
| 이용금액_오프라인_R3M | 최근 3개월 오프라인 사용액 | ⭐⭐⭐⭐⭐ |
| 이용금액_오프라인_R6M | 최근 6개월 오프라인 사용액 | ⭐⭐⭐⭐⭐ |

### 도메인 인사이트
```
💡 온/오프라인 비율이 세그먼트 특성 반영:
   - Segment 0: 오프라인 비중 높음 (백화점, 호텔, 골프장 등)
   - Segment 4: 온라인 비중 높음 (쇼핑몰, 배달앱 등)

💡 v3.5 파생변수:
   - v3_offline_ratio_R3M = 오프라인_R3M / (오프라인_R3M + 온라인_R3M + EPS)

💡 v4 파생변수:
   - v4_online_offline_usage_ratio_R6M = 온라인_R6M / (온라인_R6M + 오프라인_R6M + EPS)
```

---

## 7️⃣ 마케팅정보 (Marketing Information)

### 파일명
- `train_마케팅정보.parquet`
- `test_마케팅정보.parquet`

### 주요 변수 (~20개)

#### 포인트 활동
| 변수명 | 설명 | 중요도 |
|--------|------|--------|
| 포인트_적립포인트_R12M | 12개월 포인트 적립 | ⭐⭐⭐⭐ |
| 포인트_이용포인트_R12M | 12개월 포인트 사용 | ⭐⭐⭐⭐ |

#### 마일리지 활동
| 변수명 | 설명 | 중요도 |
|--------|------|--------|
| 마일_적립포인트_R12M | 12개월 마일 적립 | ⭐⭐⭐⭐⭐ |
| 마일_이용포인트_R12M | 12개월 마일 사용 | ⭐⭐⭐⭐⭐ |

### 도메인 인사이트
```
💡 마일리지는 Segment 0의 핵심 특징:
   - Segment 0: 마일 적립/사용 모두 高 (해외여행 多)
   - Segment 4: 마일 거의 없음

💡 v4 파생변수:
   - v4_point_activity_intensity = (포인트적립+이용) / (사용액_R12M + EPS)
   - v4_travel_mileage_activity = (마일적립+이용) / (사용액_R12M + EPS)
```

---

## 8️⃣ 성과정보 (Performance / Target)

### 파일명
- `train_성과정보.parquet` (타겟 포함)
- `test_성과정보.parquet` (타겟 없음)

### 주요 변수

| 변수명 | 설명 | 타입 | 특이사항 |
|--------|------|------|----------|
| ID | 고객 ID | 문자열 | 다른 테이블과 조인 키 |
| **Segment** | **타겟 변수 (0~4)** | 정수 | **Train만 존재** |

---

## 📊 원천 데이터 통합 후 특성

### 전처리 후 변수 구성 (v1)
```
총 변수 수: 185개
├─ 회원정보: 20개
├─ 신용정보: 30개
├─ 승인매출: 50개
├─ 청구입금: 25개
├─ 잔액정보: 20개
├─ 채널정보: 15개
├─ 마케팅정보: 20개
└─ 성과정보: 1개 (Segment)
    파생변수: 4개 (입회후경과월, 나이그룹 등)
```

### 데이터 품질
- **결측치**: 평균 2.5% (최대 10% in 마케팅정보)
- **이상치**: 금액 변수에서 극단값 존재 (상위 0.1%)
- **다중공선성**: 높음 (R3M/R6M/R12M 간 상관 0.8+)

---

## 🎯 데이터 이해를 통한 핵심 발견

### 발견 1: 세그먼트별 뚜렷한 행동 패턴
```
Segment 0 (최상위):
  - 고액 저빈도 사용
  - 해외/백화점/호텔 집중
  - 마일리지 활발
  - CA/카드론 사용 無

Segment 4 (일반):
  - 소액 고빈도 사용
  - 마트/주유/온라인 집중
  - 포인트/마일 거의 無
  - CA 소액 사용 있음
```

### 발견 2: 극심한 클래스 불균형
- 일반적인 단일 모델로는 희귀 클래스 탐지 불가능
- → v4에서 **2단계 계층적 분류** 전략 도출

### 발견 3: 시계열 패턴의 중요성
- R3M/R6M/R12M, B0M~B11M 비교로 트렌드 파악
- → v4에서 **변동성 피처** 추가

---

## 📚 참고 문서

- **다음 단계**: `03_VERSION_EVOLUTION.md` - 이 데이터로 어떻게 발전했는가
- **피처 전략**: `04_FEATURE_ENGINEERING_STRATEGY.md` - 변수 선택 및 생성 전략
- **변수 사전**: `../data/데이터명세.xlsx` - 전체 변수 상세 설명 (원본 프로젝트)

---

## 📝 문서 정보
**최종 업데이트**: 2025-12-08  
**작성자**: 윤세훈  
**데이터 소스**: 8가지 원천 데이터 파일 분석
